# nocat.conf -- NoCatAuth Configuration.
#
# Format of this file is: <Directive> <Value>, one per
#   line. Trailing and leading whitespace is ignored. Any
#   line beginning with a punctuation character is assumed to
#   be a comment.


#### General settings.
#
# Log verbosity -- 0 is (almost) no logging. 10 is log
#   everything. 5 is probably a safe middle road.
#
Verbosity       10

# PGPKeyPath -- The directory in which PGP keys are stored.
#
PGPKeyPath	/usr/local/nocat/pgp

#### Gateway-specific settings.
#
# AuthServiceURL - HTTPS URL to the login script at the authservice. 
#
AuthServiceURL  http://nocat.net/cgi-bin/login

# LogoutURL - HTTP URL to redirect user after logout.
#
LogoutURL	http://nocat.net/logout.html

# GatewayPort - The TCP port to bind the gateway 
#   service to. 5280 is de-facto standard for NoCatAuth.
#
GatewayPort     5280

# LoginTimeout - Number of seconds after a client's last
#   login/renewal to terminate their connection. Probably
#   don't want to set this to less than 60 or a lot of 
#   bandwidth is likely to get consumed by the client's
#   renewal attempts.
#
LoginTimeout	600

# ResetCmd, PermitCmd, DenyCmd -- Shell commands to reset,
#   open and close the firewall.
#
ResetCmd	/usr/local/nocat/bin/firewall.policy
PermitCmd	/usr/local/nocat/bin/access permit $MAC $IP $Class 
DenyCmd		/usr/local/nocat/bin/access deny $MAC $IP $Class 

# MessageVerify -- Shell command to verify a PGP signed
#   message. The actual message is delivered to the
#   command's standard input.
#
MessageVerify	/usr/bin/gpgv --homedir=$PGPKeyPath 2>/dev/null

#### NOTE: If you're just setting up a gateway, you can safely
#### delete or ignore everything below this comment.

#### Authservice-specific settings.
#
# Auth service database settings.
#
# Database is a DBI-style data source specification.
#
Database	dbi:mysql:database=nocat;host=paprika
DB_User		nocat
DB_Passwd	CENSORED	

# Auth service user table settings.
#
# UserTable names the table containing the user ID data.
#
# UserIDField names the column containing the ID that the
#    client uses to uniquely identifying themselves, i.e. their
#    e-mail address or username.
#
# UserPasswdField stores the user's MD5-hashed password.
#
# UserStatusField currently specifies a user's co-op
#   membership status. At this point, a true value (i.e.
#   any value not zero and not blank) indicates membership.
#   This field could be a simple 0/1 value.
#
UserTable	Member
UserIDField	User
UserPasswdField Pass
UserAuthField   Status

# Auth service web application settings.
#
# HomePage -- The authservice's notion of a default
#   redirect.
#
HomePage	http://nocat.net/

# DocumentRoot -- Where all of the application templates
#   are hiding. Can be different from Apache's
#   DocumentRoot.
#
DocumentRoot	/usr/local/nocat/htdocs

# MinPasswdLength -- Enforced minimum user password length.
#   Not much other checking is done on the user's p/w.
#
MinPasswdLength	6

# MessageSign -- shell command to sign an auth notification
#   with. The message to be signed is written to the
#   command's standard in, and the signed message is read
#   from standard out.
#
MessageSign	/usr/bin/gpg --clearsign --homedir=$PGPKeyPath -o-

# Auth service template names. See the individual templates
#   ifor details on what each one does.
#
LoginForm	login.html
SuccessForm	success.html
FatalForm	fatal.html
RenewForm	renew.html

RegisterForm	register.html
RegisterFields	name url description

UpdateForm	update.html
UpdateFields	url description

# Auth service user messages. Should be self-explanatory.
#
LoginGreeting   Greetings! Welcome to the NoCat Network.
LoginMissing    Please fill in all fields!
LoginBadUser    That e-mail address is unknown. Please try again.
LoginBadPass	That e-mail and password do not match. Please try again.
LoginBadStatus  Sorry, you are not a registered co-op member.

RegisterGreeting    Welcome! Please enter the following information to register.
RegisterMissing	    Name, E-mail, and password fields must be filled in.
RegisterUserExists  Sorry, that e-mail address is already taken. Are you already registered?
RegisterBadUser	    The e-mail address provided appears to be invalid. Did you spell it correctly?
RegisterInvalidPass All passwords must be at least six characters long.
RegisterPassNoMatch The passwords you provided do not match. Please try again.
RegisterSuccess	    Congratulations, you have successfully registered.

UpdateBadUser	    That e-mail address is unknown. Please try again.
UpdateBadPass	    That e-mail and password do not match. Please try again.
UpdateInvalidPass   New passwords must be at least six characters long.
UpdatePassNoMatch   The new passwords you provided do not match. Please try again.
UpdateSuccess	    Congratulations, you have successfully updated your account.

#### Fin.
