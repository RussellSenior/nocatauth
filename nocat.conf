###### nocat.conf -- NoCatAuth Configuration.
#
# Format of this file is: <Directive> <Value>, one per
#   line. Trailing and leading whitespace is ignored. Any
#   line beginning with a punctuation character is assumed to
#   be a comment.


###### General settings.
#
# Log verbosity -- 0 is (almost) no logging. 10 is log
#   everything. 5 is probably a safe middle road.
#
Verbosity       10

##
# PGPKeyPath -- The directory in which PGP keys are stored.
#   NoCat tries to find this in the pgp/ directory above
#   the bin/ parent directory. Set this only if you put it
#   somewhere that NoCat doesn't expect.
#
# PGPKeyPath	/usr/local/nocat/pgp

###### Gateway-specific settings.
#
# GatewayMode -- Determines the mode of operation of the gateway. Possible
#   values are:
#   
#   Captive	- Allow authentication against an auth service.
#   Open	- Simply require a user to view a splash page and accept 
#		    a use agreement.
#
# If Captive Mode is set, you will need to have values set for AuthServiceAddr,
#   AuthServiceURL, and LogoutURL. You will want to leave a short value for
#   LoginTimeout (probably <600).
#
# If Open Mode is set, you will need to have values set for SplashForm, HomePage,
#   and possibly DocumentRoot (or provide an absolute path for SplashForm). 
#   Also, you will want to set a large value for LoginTimeout (probably >3600).
#
GatewayMode	Captive

##
# GatewayLog - Where gateway debug/error messages go.
#   If unset, messages will go to STDERR.
#
GatewayLog	/usr/local/nocat/nocat.log

##
# ExternalDevice - Required. Must be set to the interface
#   connected to the Internet. Usually 'eth0' or 'eth1'
#   under Linux, or maybe even 'ppp0' if you're running
#   PPP or PPPoE.
#
ExternalDevice	eth0

##
# InternalDevice - Required. Must be set to the interface
#   connected to your local network, normally your wireless 
#   card. In Linux, some wireless devices are named 'wvlan0'
#   or 'wlan0' rather than 'ethX'.
#
InternalDevice	eth1

##
# LocalNetwork - Required. Must be set to the network
#   address and net mask of your internal network. You
#   can use the number of bits in the netmask (e.g. /16, /24, etc.)
#   or the full x.x.x.x specification.
#
LocalNetwork	10.0.1.0/255.255.255.0

##
# TrustedGroups - A list of groups registered with the auth server
#   that a user may claim membership in order to gain Member-class
#   access through this portal.
#
TrustedGroups	NoCat NYCWireless PersonalTelco

##
# DNSAddr - Optional. *If* you choose not to run DNS on your internal network,
#   specify the address of a domain name server on the Internet that wireless
#   clients can use to get out. Should be the same DNS that your DHCP server
#   hands out. If you run DNS locally, leave this option commented.
#
# DNSAddr 111.222.333.444

##
# LoginTimeout - Number of seconds after a client's last
#   login/renewal to terminate their connection. Probably
#   don't want to set this to less than 60 or a lot of 
#   bandwidth is likely to get consumed by the client's
#   renewal attempts. Defaults to 300 seconds.
#
# LoginTimeout	600

##
# Owners - Optional.  List all local "owner" class users here, separated 
#   by spaces.  Owners typically get full bandwidth, and unrestricted
#   access to all network resources.
#
# Owners rob@nocat.net schuyler@nocat.net

##
# IncludePorts - Optional.  Specify TCP ports to allow access to when 
#   public class users login.  All others will be denied.
#
#   For a list of common services and their respective port numbers, see 
#   your /etc/services file.
#
# IncludePorts    80 443 22

##
# ExcludePorts - Optional.  Specify TCP ports to denied access to when
#   public class users login.  All others will be allowed.
#
#   Note that you should use either IncludePorts or ExcludePorts, but not
#   both.  If neither is specified, access is granted to all ports to
#   public class users.
#
# ExcludePorts    25 21

##
# ResetCmd, PermitCmd, DenyCmd -- Shell commands to reset,
#   open and close the firewall. You probably don't need to
#   change these.
#
ResetCmd	firewall.linux
PermitCmd	access permit $MAC $IP $Class 
DenyCmd		access deny $MAC $IP $Class 

##
# GatewayPort - The TCP port to bind the gateway 
#   service to. 5280 is de-facto standard for NoCatAuth.
#   Change this only if you absolutely need to.
#
# GatewayPort     5280

##
# MessageVerify -- Shell command to verify a PGP signed
#   message. The actual message is delivered to the
#   command's standard input. NoCat tries to find gpg
#   and gpgv in your path. Set these only if you need to find 
#   them elsewhere.
#
# GpgvPath	/usr/bin/gpgv
#
# MessageVerify	$GpgvPath --homedir=$PGPKeyPath 2>/dev/null

###### Captive Portal Specific Settings
#
# AuthServiceAddr - Required, for captive mode. Must be set to the address of
#   your authentication service. You must use an IP address
#   if DNS resolution isn't available at gateway startup.
#
# AuthServiceAddr 208.201.239.21
#
AuthServiceAddr	auth.nocat.net

##
# AuthServiceURL - HTTPS URL to the login script at the authservice. 
#
AuthServiceURL  https://auth.nocat.net/cgi-bin/login

##
# LogoutURL - HTTP URL to redirect user after logout.
#
LogoutURL	https://auth.nocat.net/forms/logout.html

###### Open Portal Specific Settings.
#
# SplashForm -- Form displayed to users on capture.
#
SplashForm	splash.html

###### Settings common to Open Portals and Auth Services.
#
# HomePage -- The authservice's notion of a default
#   redirect.
#
HomePage	http://nocat.net/

# DocumentRoot -- Where all of the application templates
#   (including SplashPage) are hiding. Can be different from Apache's
#   DocumentRoot.
#
DocumentRoot	/usr/local/nocat/htdocs

###### Experimental gateway options. Not currently functional.
#
# PingTimeout	1
# PingCmd		ping -c1 -w1 $IP 2>&1 >/dev/null

###### NOTE: If you're just setting up a gateway, you can safely
###### delete or ignore everything below this comment.

###### Authservice-specific settings.
#
# Auth service database settings.
#
# Database is a DBI-style data source specification.
#
Database	dbi:mysql:database=nocat
DB_User		nocat
DB_Passwd	CENSORED	

###### Auth service user table settings.
#
# UserTable names the table containing the user ID data.
#
# UserIDField names the column containing the ID that the
#    client uses to uniquely identifying themselves, i.e. their
#    e-mail address or username.
#
# UserPasswdField stores the user's MD5-hashed password.
#
# UserAuthField is deprecated and will go away.
#
UserTable	Member
UserIDField	User
UserPasswdField Pass
UserAuthField   Status
UserStampField	Created

GroupTable      Network
GroupField      Network
GroupAdminField Admin

####### Auth service web application settings.
#
# MinPasswdLength -- Enforced minimum user password length.
#   Not much other checking is done on the user's p/w.
#
MinPasswdLength	6

# MessageSign -- shell command to sign an auth notification
#   with. The message to be signed is written to the
#   command's standard in, and the signed message is read
#   from standard out.
#
# GpgPath	/usr/bin/gpg
#
# MessageSign	$GpgPath --clearsign --homedir=$PGPKeyPath -o-

# Auth service template names. See the individual templates
#   for details on what each one does.
#
LoginForm	login.html
LoginOKForm	login_ok.html
FatalForm	fatal.html
ExpiredForm	expired.html
RenewForm	renew.html

RegisterForm	register.html
RegisterOKForm	register_ok.html
RegisterFields	Name URL Description

UpdateForm	update.html
UpdateFields	URL Description

###### Auth service user messages. Should be self-explanatory.
#
LoginGreeting   Greetings! Welcome to the NoCat Network.
LoginMissing    Please fill in all fields!
LoginBadUser    That e-mail address is unknown. Please try again.
LoginBadPass	That e-mail and password do not match. Please try again.
LoginBadStatus  Sorry, you are not a registered co-op member.

RegisterGreeting    Welcome! Please enter the following information to register.
RegisterMissing	    Name, E-mail, and password fields must be filled in.
RegisterUserExists  Sorry, that e-mail address is already taken. Are you already registered?
RegisterBadUser	    The e-mail address provided appears to be invalid. Did you spell it correctly?
RegisterInvalidPass All passwords must be at least six characters long.
RegisterPassNoMatch The passwords you provided do not match. Please try again.
RegisterSuccess	    Congratulations, you have successfully registered.

UpdateGreeting	    Enter your E-mail and password to update your info.
UpdateBadUser	    That e-mail address is unknown. Please try again.
UpdateBadPass	    That e-mail and password do not match. Please try again.
UpdateInvalidPass   New passwords must be at least six characters long.
UpdatePassNoMatch   The new passwords you provided do not match. Please try again.
UpdateSuccess	    Congratulations, you have successfully updated your account.

###### Fin.
